<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
<!DOCTYPE issue SYSTEM "lwg-issue.dtd" [ 
  <!ENTITY nbsp "&#160;">
  <!ENTITY sect "&#xA7;">
] >

<issue num="61" status="New">
<title>Improper <tt>status(const path&amp;)</tt> specification</title>
<section><sref ref="15.33 [fs.op.status]"/></section>
<submitter>Jonathan Wakely</submitter>
<date>15 May 2015</date>

<discussion>
<p>
<sref ref="15.33 [fs.op.status]"/> paragraph 2 says:
</p>
<blockquote>
<p>
<i>Effects</i>: As if:
</p>
<blockquote>
<pre>
error_code ec;
file_status result = status(p, ec);
if (result == file_type::none)
</pre>
</blockquote>
</blockquote>
<p>
This won't compile, there is no comparison operator for <tt>file_status</tt>
and <tt>file_type</tt>, and the conversion from <tt>file_type</tt> to <tt>file_status</tt> is
explicit.
</p>
</discussion>

<resolution>

<ol>
<li>
<p>
  <i>Change <sref ref="15.33 [fs.op.status]"/> paragraph 2 as indicated:</i>
</p>

<blockquote>
<pre>
file_status status(const path&amp; p);
</pre>
<blockquote>
<p>
-2- <i>Effects</i>: As if:
</p>
<blockquote>
<pre>
error_code ec;
file_status result = status(p, ec);
if (result<ins>.type()</ins> == file_type::none)
  throw filesystem_error(<em>implementation-supplied-message</em>, p, ec);
return result;
</pre>
</blockquote>
</blockquote>
</blockquote>
</li>
</ol>
</resolution>

</issue>
